# Node

## 1. Nodejs适用于哪些场景？

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（3 分）

- T后端开发，Nodejs的异步I/O天生适合做Web高并发。

- BFF开发，比如SSR中间层或者GraphQL中间层。

- 前端基建，Webpack、Gulp、Babel、Jest等等前端工程化的工具或插件。

## 2. Nodejs的事件循环和浏览器有什么区别？

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（3 分）

Node.js 的事件循环和浏览器中的事件循环的区别在于，浏览器的异步任务分为宏任务队列和微任务队列，而Nodejs的异步任务分成了6个任务队列，按执行顺序分别为：

- timers阶段：处理setTimeout()和setInterval()等定时器事件。

- I/O callbacks阶段：处理几乎所有的异步I/O回调，例如网络I/O、文件I/O等。

- idle, prepare阶段：这是Node.js内部使用的，开发者很少会用到。

- poll阶段：轮询阶段，用于等待新的I/O事件，执行I/O回调。

- check阶段：执行setImmediate()的回调函数。

- close callbacks阶段：执行关闭事件的回调函数，例如socket.on('close')。

## 3. Nodejs的内存泄漏排查方法有哪些？

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（3 分）

Node.js的内存泄漏排查方法有以下几种：

- 使用Node.js自带的内存分析工具，如`process.memoryUsage()`和`heapdump`模块。

- 使用第三方内存分析工具，如Chrome DevTools、VisualVM等。

- 使用内存泄漏检测工具，如`leak`、`memwatch`等。

- 使用代码审查和静态分析工具，如ESLint、JSHint等。

- 使用单元测试和集成测试，确保代码的正确性和稳定性。

## 4. Nodejs的进程管理有哪些方法？

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（3 分）

Node.js的进程管理有以下几种方法：

- 使用`child_process`模块创建子进程，并使用`process`模块进行进程间通信。

- 使用`cluster`模块创建集群，利用多核CPU资源。

- 使用`pm2`等第三方进程管理工具，如自动重启、负载均衡、日志管理等功能。

- 使用`forever`等第三方工具，如自动重启、日志管理等功能。

- 使用`node-mac`等第三方工具，如自动重启、日志管理等功能。

## 5. Nodejs的模块化有哪些方法？

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（3 分）

Node.js的模块化有以下几种方法：

- CommonJS模块化：使用`require`和`module.exports`进行模块导入和导出。

- ES6模块化：使用`import`和`export`进行模块导入和导出。

- AMD模块化：使用`define`和`require`进行模块导入和导出。

- UMD模块化：兼容CommonJS和AMD模块化。

- 全局变量：将变量挂载到`global`对象上，方便全局访问。

- 命名空间：将变量挂载到命名空间对象上，避免全局变量污染。

- 模块打包：使用Webpack、Rollup等工具将模块打包成一个文件，方便部署和分发。

## 6. 讲一下常见的Nodejs框架？

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（3 分）

- Koa：一个轻量的Nodejs框架，代码非常简洁。采用洋葱圈模型中间件，非常方便扩展功能，但是开发后端API需要进行再封装。

- Express：Express也是一个轻量框架，Express和Koa的区别在于中间件机制。但总体差别不是很大，绝大多数Nodejs框架都是在Koa或者Express基础上封装的。

- Eggjs：基于Koa封装的框架，整合了数据库、路由、安全防护、日志记录、异常处理等中间件，可以用来快速开发Rest或者Restful API项目。

- Nestjs：基于TS,使用了大量的装饰器语法，开发体验类似于Java的Springboot。除此之外，Nestjs还提供了GraphQL、WebSocket、各种MQ和微服务的解决方案，比较适合大型后端项目的开发。

## 7. Nodejs的异步编程有哪些方法？

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（3 分）

Node.js的异步编程有以下几种方法：

- 回调函数：将异步操作的结果作为回调函数的参数传递给回调函数。

- Promise：将异步操作的结果封装成一个Promise对象，通过then和catch方法处理异步操作的结果。

- async/await：将异步操作的结果封装成一个Promise对象，通过await关键字等待异步操作的结果。

- Generator：将异步操作的结果封装成一个Generator对象，通过yield关键字等待异步操作的结果。

- 流程控制库：如`async`、`bluebird`、`co`等库，提供了更方便的异步编程方式。

- 事件驱动：通过事件驱动的方式处理异步操作，如`EventEmitter`、`Stream`等。

## 8. Nodejs的文件系统有哪些方法？

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（3 分）

Node.js的文件系统有以下几种方法：

- `fs.readFile`：读取文件内容。

- `fs.writeFile`：写入文件内容。

- `fs.appendFile`：追加文件内容。

- `fs.unlink`：删除文件。

- `fs.rename`：重命名文件。

- `fs.stat`：获取文件信息。

- `fs.readdir`：读取目录内容。

- `fs.mkdir`：创建目录。

- `fs.rmdir`：删除目录。

- `fs.watch`：监听文件或目录的变化。

## 9. 什么是Stream流，有哪些应用场景？

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（2 分）

- Stream是一种处理流式数据的抽象接口，用于读取、写入、转换和操作数据流。它是一个基于事件的 API，可以让我们以高效、低延迟的方式处理大型数据集。

- 比如读取文件，使用流我们可以一点一点来读取文件，每次只读取或写入文件的一小部分数据块，而不是一次性将整个文件读取或写入到内存中或磁盘中，这样做能够降低内存占用。

## 10. 什么是BFF？

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（1 分）

- BFF（Backend For Frontend）是中间层，由前端同学开发的后端项目。

- 最常见的BFF项目像SSR和GraphQL。SSR用来解决SEO问题，GraphQL用来聚合数据，解决API查询的问题。

## 11. 什么是ORM？Nodejs的ORM框架有哪些？

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（3 分）

- ORM框架是通过对SQL语句进行封装，并将数据库的数据表和用户代码里的模型对象进行自动映射。

- 这样开发者使用时只需要调用模型对象的方法就能实现对数据库的增删改查，不用手写太多的SQL了。

- Nodejs的ORM框架有Sequelize、TypeORM、Mongoose等。