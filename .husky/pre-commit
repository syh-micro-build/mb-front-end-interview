# 不允许直接在主分支上提交代码
check_branch() {
  branch="$(git rev-parse --abbrev-ref HEAD)"
  
  if [ "$branch" = "master" ] || [ "$branch" = "main" ]; then
    echo "Do NOT commit on \"$branch\""
    exit 1
  fi
}

npm test

check_branch

npx lint-staged